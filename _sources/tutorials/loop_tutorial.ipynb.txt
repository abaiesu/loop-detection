{
 "cells": [
  {
   "cell_type": "markdown",
   "id": "6adb22ba-3b68-4bbc-ae3a-d6b80a8404dc",
   "metadata": {},
   "source": [
    "# Loop Detection Tutorial"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "ef23cde7-c0a5-4afb-a0fe-de151878e757",
   "metadata": {},
   "outputs": [],
   "source": [
    "from loop_detection import loop_detection, Range, get_UC\n",
    "from loop_detection.loop_detection_code import get_rule_set, get_aliases\n",
    "from tests.random_generation import create_collection_rules, generate_fw_tables, print_from_fw_tables"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "d223de3b-1e3e-4f99-aeed-ebd8678e004d",
   "metadata": {},
   "source": [
    "Take the following fowarding tables"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "7fabbe77-4418-4a95-a65c-d46e25b5e1b4",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "{0: [('R1', [1, 5], 1),\n",
       "  ('R2', [1, 4], 1),\n",
       "  ('R3', [0, 1], None),\n",
       "  ('H0', [0, 5], None)],\n",
       " 1: [('R4', [2, 4], 3), ('H1', [0, 5], None)],\n",
       " 2: [('R5', [0, 4], 3), ('H2', [0, 5], None)],\n",
       " 3: [('R5', [2, 3], 1), ('R6', [4, 5], None), ('H3', [0, 5], None)]}"
      ]
     },
     "execution_count": 2,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# each node has a base rule H but the actions for the base rule can differ\n",
    "\n",
    "fw_tables = {i : [] for i in range(4)}\n",
    "\n",
    "fw_tables[0] = [('R1', Range(1,5), 1), \n",
    "                ('R2', Range(1,4), 1), \n",
    "                ('R3', Range(0,1), None),\n",
    "                ('H0', Range(0,5), None)]\n",
    "\n",
    "fw_tables[1] =  [('R4', Range(2,4), 3), \n",
    "                 ('H1', Range(0,5), None)]\n",
    "\n",
    "fw_tables[2] = [('R5', Range(0, 4), 3), \n",
    "                ('H2', Range(0,5), None)]\n",
    "\n",
    "fw_tables[3] =  [('R5', Range(2,3), 1),\n",
    "                 ('R6', Range(4, 5), None), \n",
    "                 ('H3', Range(0,5), None)]\n",
    "\n",
    "fw_tables"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "id": "736cfe2e-0545-4f57-b303-2a144bc31b6a",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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",
      "text/plain": [
       "<Figure size 400x200 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "print_from_fw_tables(fw_tables)"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "865a7436-6d0a-486e-89bc-d296e9c91750",
   "metadata": {},
   "source": [
    "There is a loop between 1 and 3."
   ]
  },
  {
   "cell_type": "markdown",
   "id": "c5db87eb-a26c-4bd6-a932-7c37817f63cc",
   "metadata": {},
   "source": [
    "Let us check the rule set of the network."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "c0260192-140a-464c-a860-d4adb5732cfa",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "{'R1': (0, [1, 5], 1, 0),\n",
       " 'R2': (0, [1, 4], 1, 1),\n",
       " 'R3': (0, [0, 1], None, 2),\n",
       " 'H0': (0, [0, 5], None, 3),\n",
       " 'R4': (1, [2, 4], 3, 0),\n",
       " 'H1': (1, [0, 5], None, 1),\n",
       " 'R5': (3, [2, 3], 1, 0),\n",
       " 'H2': (2, [0, 5], None, 1),\n",
       " 'R6': (3, [4, 5], None, 1),\n",
       " 'H3': (3, [0, 5], None, 2)}"
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "rule_set = get_rule_set(fw_tables)\n",
    "rule_set"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "9bd0d304-d4cd-4673-a819-365cf9dc7efd",
   "metadata": {},
   "source": [
    "Note that H0, H1, H2, H3 are different names for the same rule (at different locations). \n",
    "\n",
    "\n",
    "Remove such redundant copies."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "id": "1fc32b02-9a08-44df-aaad-afe86195f0bd",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "{('H0', [0, 5]),\n",
       " ('R1', [1, 5]),\n",
       " ('R2', [1, 4]),\n",
       " ('R3', [0, 1]),\n",
       " ('R4', [2, 4]),\n",
       " ('R5', [2, 3]),\n",
       " ('R6', [4, 5])}"
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "aliases = get_aliases(rule_set)\n",
    "R = [(key, values[1]) for key, values in rule_set.items()]\n",
    "unique_count = {key: 0 for key in aliases.keys()}\n",
    "R_set = set()\n",
    "for rule in R:\n",
    "    if unique_count[rule[1]] == 0:\n",
    "        R_set.add(rule)\n",
    "        unique_count[rule[1]] += 1\n",
    "R_set"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "07b38826-b6d2-4d0b-8d7d-fd0699b2f4bd",
   "metadata": {},
   "source": [
    "Let us get the uncovered combinations generated by these rules."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "id": "80341179-79a0-4aaf-8118-91d7b62ddb86",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "5 atoms :\n",
      "H0 & R3 , value = [0, 1]\n",
      "H0 & R1 & R2 & R4 & R6 , value = [4, 4]\n",
      "H0 & R1 & R2 & R3 , value = [1, 1]\n",
      "H0 & R1 & R2 & R4 & R5 , value = [2, 3]\n",
      "H0 & R1 & R6 , value = [4, 5]\n"
     ]
    }
   ],
   "source": [
    "UC = get_UC(R_set)\n",
    "print(len(UC), 'atoms :')\n",
    "for uc in UC:\n",
    "    print(uc.get_name(),', value =', uc)"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "e8650177-e518-41e8-af9d-a71adbe1fedb",
   "metadata": {},
   "source": [
    "Now, let us run the loop verification."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "id": "fac64503-3e9d-42a1-8dbb-7aa5b0838232",
   "metadata": {},
   "outputs": [],
   "source": [
    "result = loop_detection(fw_tables)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "id": "d3e2c631-89bc-468c-8f42-272f9f42144f",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Found a loop\n",
      "Loop followed by: H0 & R1 & R2 & R4 & R5 , value = [2, 3]\n",
      "Nodes involved: {1, 3}\n"
     ]
    }
   ],
   "source": [
    "if len(result) > 0:\n",
    "    print('Found a loop')\n",
    "    for res in result:\n",
    "        print('Loop followed by:',  res[0].get_name(), ', value =', res[0])\n",
    "        nodes_involved = set()\n",
    "        for edge in res[1]:\n",
    "            nodes_involved.add(edge[0])\n",
    "            nodes_involved.add(edge[1])\n",
    "        print('Nodes involved:', nodes_involved)"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "5696d464-83f0-438d-9dc9-e633f0252292",
   "metadata": {},
   "source": [
    "Now, let's test on a random network."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "id": "382a7be3-1e5c-496d-a227-302f6d27e98a",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "------------------------------------------------------------\n",
      "Fowarding table:\n",
      "\n",
      "Node 0\n",
      "('H0', [0, 15], None)\n",
      "('R00', [11, 15], 1)\n",
      "\n",
      "Node 1\n",
      "('H1', [0, 15], None)\n",
      "('R01', [1, 14], 2)\n",
      "\n",
      "Node 2\n",
      "('H2', [0, 15], None)\n",
      "('R02', [1, 4], 0)\n",
      "('R12', [6, 8], 0)\n",
      "('R22', [0, 1], 1)\n",
      "\n",
      "Node 3\n",
      "('H3', [0, 15], None)\n",
      "('R03', [13, 15], 1)\n",
      "('R13', [7, 14], 4)\n",
      "\n",
      "Node 4\n",
      "('H4', [0, 15], None)\n",
      "('R04', [11, 14], 2)\n",
      "('R14', [2, 13], 2)\n",
      "\n",
      "------------------------------------------------------------\n",
      "Graph of the whole network\n"
     ]
    },
    {
     "data": {
      "image/png": "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",
      "text/plain": [
       "<Figure size 400x200 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "------------------------------------------------------------\n",
      "1 loops detected\n",
      "\n",
      "Details:\n",
      "\n",
      "Atom: H0 & R01 & R02 & R22 , value = [1, 1]\n",
      "1 loops\n",
      "Nodes involved:\n",
      "Cycle 1 : [1, 2]\n",
      "\n"
     ]
    }
   ],
   "source": [
    "gen_fw_tables = generate_fw_tables(5, max_range = 15)\n",
    "print('-'*60)\n",
    "print('Fowarding table:')\n",
    "print()\n",
    "for key, value in gen_fw_tables.items():\n",
    "    print('Node', key)\n",
    "    for rule in value:\n",
    "        print(rule)\n",
    "    print()\n",
    "print('-'*60)\n",
    "print(\"Graph of the whole network\")\n",
    "print_from_fw_tables(gen_fw_tables)\n",
    "result = loop_detection(gen_fw_tables)\n",
    "print('-'*60)\n",
    "nb_loops = sum(len(res[1]) for res in result)\n",
    "print(nb_loops, 'loops detected')\n",
    "print()\n",
    "print('Details:')\n",
    "print()\n",
    "for res in result:\n",
    "    print('Atom:',  res[0].get_name(), ', value =', res[0])\n",
    "    print(len(res[1]), 'loops')\n",
    "    print('Nodes involved:')\n",
    "    for i, cycle in enumerate(res[1]):\n",
    "        print('Cycle', i + 1 , ':', cycle)\n",
    "    print()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "fc346596-8d6b-435c-95e6-2d5538c9a548",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.11.5"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
